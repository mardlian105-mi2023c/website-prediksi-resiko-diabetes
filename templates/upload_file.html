<!DOCTYPE html>
<html lang="id">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Prediksi Batch CSV | Diabetes Risk</title>
    <script src="https://cdn.tailwindcss.com"></script>

    <style>
      body {
        background: linear-gradient(135deg, #e0f2fe 0%, #f8fafc 100%);
        min-height: 100vh;
      }
      .glass-card {
        background: rgba(255, 255, 255, 0.85);
        backdrop-filter: blur(10px);
        border: 1px solid rgba(255, 255, 255, 0.25);
        box-shadow: 0 8px 25px rgba(0, 0, 0, 0.05);
      }
    </style>
  </head>
  <body>
    <nav class="bg-blue-600 shadow-md">
      <div
        class="container mx-auto px-4 py-3 flex justify-between items-center"
      >
        <h1 class="text-white font-semibold text-lg">Diabetes Prediction</h1>

        <ul class="flex space-x-6">
          <li>
            <a
              href="{{ url_for('index') }}"
              class="text-white hover:text-gray-200 transition"
            >
              Dashboard
            </a>
          </li>
          <li>
            <a
              href="{{ url_for('predict') }}"
              class="text-white hover:text-gray-200 transition"
            >
              Prediksi Individu
            </a>
          </li>
          <li>
            <a
              href="{{ url_for('predict_file') }}"
              class="text-white hover:text-gray-200 transition"
            >
              Prediksi CSV
            </a>
          </li>
        </ul>
      </div>
    </nav>
    <div class="font-sans flex items-center justify-center p-6">
      <div class="glass-card rounded-2xl p-10 max-w-3xl w-full text-center">
        <!-- Header -->
        <div class="mb-8">
          <div
            class="w-20 h-20 bg-emerald-100 rounded-full flex justify-center items-center mx-auto mb-4"
          >
            <i class="fas fa-file-csv text-4xl text-emerald-600"></i>
          </div>
          <h1 class="text-3xl font-bold text-gray-800">
            Prediksi CSV Diabetes
          </h1>
          <p class="text-gray-600 mt-2">
            Unggah file CSV yang sesuai format data pelatihan.
          </p>
        </div>

        <!-- Flash Messages -->
        {% with messages = get_flashed_messages(with_categories=true) %} {% if
        messages %} {% for category, message in messages %}
        <div
          class="p-4 rounded-lg mb-4 text-sm
                        {{ 'bg-red-100 text-red-700 border border-red-300' if category == 'error' else 'bg-green-100 text-green-700 border border-green-300' }}"
        >
          {{ message }}
        </div>
        {% endfor %} {% endif %} {% endwith %}

        <!-- Upload Form -->
        <form
          method="POST"
          action="{{ url_for('predict_file') }}"
          enctype="multipart/form-data"
          class="space-y-6"
        >
          <div class="text-left">
            <label for="file" class="font-medium text-gray-700"
              >Pilih File CSV</label
            >
            <input
              type="file"
              name="file"
              id="file"
              accept=".csv"
              required
              class="w-full mt-2 file:px-4 file:py-2 file:bg-emerald-600 file:text-white file:rounded-lg cursor-pointer bg-gray-50 border border-gray-300 rounded-lg"
            />
          </div>

          <button
            class="w-full bg-gradient-to-r from-emerald-500 to-teal-600 text-white font-semibold py-3 rounded-xl hover:shadow-lg hover:scale-[1.02] transition"
          >
            ðŸš€ Proses Prediksi Batch
          </button>

          <a
            href="{{ url_for('predict') }}"
            class="block w-full text-center text-gray-700 font-medium bg-gray-200 hover:bg-gray-300 py-3 rounded-xl transition"
          >
            â—€ Kembali
          </a>
        </form>

        <!-- Output Result -->
        {% if output %}
        <div class="mt-10 text-left">
          <h2 class="text-xl font-bold text-gray-800 mb-4">Hasil Prediksi</h2>
          <div class="overflow-x-auto p-4 bg-white rounded-xl shadow-sm border">
            {{ output | safe }}
          </div>
        </div>
        {% endif %}
      </div>
    </div>
    <!-- Icons -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/js/all.min.js"></script>
  </body>
</html>
